<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Panel administrativo | Cuidado con el pug</title>
  <link rel="stylesheet" href="/static/admin.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand-wrap">
      <button id="sidebarToggle" class="btn ghost sidebar-toggle" type="button" aria-controls="adminSidebar" aria-expanded="true">
        Menu
      </button>
      <div class="brand">
        <p class="eyebrow">Cuidado con el pug</p>
        <h1>Panel administrativo</h1>
      </div>
    </div>
    <div class="actions">
      <p id="adminName" class="admin-name"></p>
      <button id="goClient" class="btn ghost" type="button">Vista cliente</button>
      <button id="logoutBtn" class="btn danger" type="button">Cerrar sesion</button>
    </div>
  </header>

  <main class="admin-shell">
    <aside id="adminSidebar" class="sidebar" aria-label="Navegacion administrativa">
      <p class="sidebar-title">Navegacion</p>
      <nav class="sidebar-nav">
        <button class="sidebar-link active" data-sidebar-item="Configuracion" data-sidebar-view="configuracion" type="button">
          <span class="sidebar-icon">CF</span>
          <span class="sidebar-label">Configuracion</span>
        </button>
        <button class="sidebar-link" data-sidebar-item="Ventas" data-sidebar-view="ventas" type="button">
          <span class="sidebar-icon">VT</span>
          <span class="sidebar-label">Ventas</span>
        </button>
        <button class="sidebar-link" data-sidebar-item="CRM" data-sidebar-view="crm" type="button">
          <span class="sidebar-icon">RM</span>
          <span class="sidebar-label">CRM</span>
        </button>
        <button class="sidebar-link" data-sidebar-item="Sucursales" data-sidebar-view="sucursales" type="button">
          <span class="sidebar-icon">SC</span>
          <span class="sidebar-label">Sucursales</span>
        </button>
        <button class="sidebar-link" data-sidebar-item="Lista de prioridad" data-sidebar-view="prioridad" type="button">
          <span class="sidebar-icon">LP</span>
          <span class="sidebar-label">Lista de prioridad</span>
        </button>
        <button class="sidebar-link" data-sidebar-item="Organigrama" data-sidebar-view="organigrama" type="button">
          <span class="sidebar-icon">OG</span>
          <span class="sidebar-label">Organigrama</span>
        </button>
        <button class="sidebar-link" data-sidebar-item="Proveedores" data-sidebar-view="proveedores" type="button">
          <span class="sidebar-icon">PV</span>
          <span class="sidebar-label">Proveedores</span>
        </button>
      </nav>
    </aside>

    <section class="layout">
      <section class="admin-view active" data-admin-view="configuracion">
        <section class="summary-grid" id="summaryGrid">
          <article class="card stat">
            <p>Usuarios</p>
            <strong id="usersTotal">-</strong>
          </article>
          <article class="card stat">
            <p>Reservaciones</p>
            <strong id="reservationsTotal">-</strong>
          </article>
          <article class="card stat">
            <p>Pendientes</p>
            <strong id="reservationsPending">-</strong>
          </article>
          <article class="card stat">
            <p>Vehiculos activos</p>
            <strong id="vehiclesActive">-</strong>
          </article>
        </section>

        <section class="panel card">
          <div class="panel-head">
            <h2>Gestion de reservaciones</h2>
            <button id="refreshReservations" class="btn small" type="button">Actualizar</button>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Cliente</th>
                  <th>Vehiculo</th>
                  <th>Fechas</th>
                  <th>Estatus</th>
                  <th>Notas admin</th>
                  <th>Accion</th>
                </tr>
              </thead>
              <tbody id="reservationsTable">
                <tr><td colspan="7">Cargando...</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="panel card">
          <div class="panel-head">
            <h2>Gestion de vehiculos</h2>
            <button id="refreshVehicles" class="btn small" type="button">Actualizar</button>
          </div>
          <div class="vehicle-status-legend" aria-label="Leyenda de estatus de vehiculos">
            <p class="vehicle-status-legend-title">Leyenda de colores:</p>
            <div class="vehicle-status-legend-items">
              <span class="status-pill vehicle-status-pill status-available">Disponible</span>
              <span class="status-pill vehicle-status-pill status-reserved">Reservado</span>
              <span class="status-pill vehicle-status-pill status-maintenance">Mantenimiento</span>
            </div>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Vehiculo</th>
                  <th>Placa</th>
                  <th>Precio dia</th>
                  <th>Estatus</th>
                  <th>Activo</th>
                  <th>Accion</th>
                </tr>
              </thead>
              <tbody id="vehiclesTable">
                <tr><td colspan="7">Cargando...</td></tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="panel card">
          <div class="panel-head">
            <h2>Gestion de usuarios</h2>
            <button id="refreshUsers" class="btn small" type="button">Actualizar</button>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Email</th>
                  <th>Telefono</th>
                  <th>Rol</th>
                  <th>Accion</th>
                </tr>
              </thead>
              <tbody id="usersTable">
                <tr><td colspan="6">Cargando...</td></tr>
              </tbody>
            </table>
          </div>
        </section>
      </section>

      <section class="admin-view" data-admin-view="ventas">
        <section class="panel card">
          <div class="view-head">
            <h2>Ventas</h2>
            <p>Rendimiento comercial con trazabilidad de reservas, cancelaciones y reembolsos.</p>
          </div>
          <section class="summary-grid compact-grid">
            <article class="card stat">
              <p>Ingresos del dia</p>
              <strong id="salesIncomeDay">-</strong>
            </article>
            <article class="card stat">
              <p>Ingresos del mes</p>
              <strong id="salesIncomeMonth">-</strong>
            </article>
            <article class="card stat">
              <p>Reservas cerradas</p>
              <strong id="salesClosedReservations">-</strong>
            </article>
            <article class="card stat">
              <p>Canceladas</p>
              <strong id="salesCancelledReservations">-</strong>
            </article>
            <article class="card stat">
              <p>Reembolsos pendientes</p>
              <strong id="salesRefundPending">-</strong>
            </article>
            <article class="card stat">
              <p>Ticket promedio</p>
              <strong id="salesAvgTicket">-</strong>
            </article>
          </section>
          <div class="table-wrap mini-table">
            <table>
              <thead>
                <tr>
                  <th>Folio</th>
                  <th>Cliente</th>
                  <th>Canal</th>
                  <th>Metodo</th>
                  <th>Monto</th>
                  <th>Reserva</th>
                  <th>Reembolso</th>
                  <th>Estatus</th>
                </tr>
              </thead>
              <tbody id="salesTable">
                <tr>
                  <td colspan="8">Cargando...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </section>

      <section class="admin-view" data-admin-view="crm">
        <section class="panel card">
          <div class="view-head">
            <h2>CRM servicio al cliente</h2>
            <p>Seguimiento de casos, SLA y reembolsos con prioridad operativa.</p>
          </div>
          <section class="summary-grid compact-grid">
            <article class="card stat">
              <p>Casos totales</p>
              <strong id="crmTotalCases">-</strong>
            </article>
            <article class="card stat">
              <p>Casos abiertos</p>
              <strong id="crmOpenCases">-</strong>
            </article>
            <article class="card stat">
              <p>Alta prioridad</p>
              <strong id="crmHighPriority">-</strong>
            </article>
            <article class="card stat">
              <p>Reembolsos pendientes</p>
              <strong id="crmRefundPending">-</strong>
            </article>
          </section>
          <div class="table-wrap mini-table">
            <table>
              <thead>
                <tr>
                  <th>Sel.</th>
                  <th>Folio</th>
                  <th>Cliente</th>
                  <th>Caso</th>
                  <th>Prioridad</th>
                  <th>Estatus</th>
                  <th>Ultima actualizacion</th>
                </tr>
              </thead>
              <tbody id="crmCasesTable">
                <tr>
                  <td colspan="7">Cargando...</td>
                </tr>
              </tbody>
            </table>
          </div>
          <section id="crmDetailPanel" class="card crm-detail-card">
            <p id="crmDetailHint" class="crm-detail-hint">Selecciona una fila para ver el detalle del ticket.</p>
            <div id="crmDetailBody" class="crm-detail-body" hidden>
              <div class="crm-detail-grid">
                <article class="crm-detail-item">
                  <p>Ticket</p>
                  <strong id="crmDetailCaseId">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Folio</p>
                  <strong id="crmDetailFolio">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Cliente</p>
                  <strong id="crmDetailClient">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Contacto</p>
                  <strong id="crmDetailContact">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Tipo de caso</p>
                  <strong id="crmDetailType">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Prioridad</p>
                  <strong id="crmDetailPriority">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Estatus</p>
                  <strong id="crmDetailStatus">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Reserva</p>
                  <strong id="crmDetailReservationStatus">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Reembolso</p>
                  <strong id="crmDetailRefundStatus">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Canal</p>
                  <strong id="crmDetailChannel">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Monto</p>
                  <strong id="crmDetailAmount">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Factura</p>
                  <strong id="crmDetailInvoice">-</strong>
                </article>
                <article class="crm-detail-item">
                  <p>Ultima actualizacion</p>
                  <strong id="crmDetailLastUpdate">-</strong>
                </article>
              </div>
              <article class="crm-detail-message">
                <h3>Descripcion del ticket</h3>
                <p id="crmDetailMessage">-</p>
              </article>
            </div>
          </section>
        </section>
      </section>

      <section class="admin-view" data-admin-view="sucursales">
        <section class="panel card">
          <div class="view-head">
            <h2>Sucursales</h2>
            <p>Vista general por sede con gerente responsable y ubicacion operativa.</p>
          </div>
          <div class="branches-grid">
            <article class="card branch-card">
              <h3>Monterrey Centro</h3>
              <p><strong>Gerente:</strong> Ana Lucia Herrera</p>
              <p><strong>Contacto:</strong> 81 2044 1101 | ana.herrera@cuidado-pug.com</p>
              <p><strong>Ubicacion:</strong> Av. Juarez 510, Centro, Monterrey, NL</p>
              <p>Flota disponible: 42 unidades</p>
              <p>Personal activo: 18</p>
              <p>Horario: 08:00 - 20:00</p>
            </article>
            <article class="card branch-card">
              <h3>Apodaca</h3>
              <p><strong>Gerente:</strong> Rogelio Cardenas</p>
              <p><strong>Contacto:</strong> 81 2099 3302 | rogelio.cardenas@cuidado-pug.com</p>
              <p><strong>Ubicacion:</strong> Carretera Miguel Aleman KM 12, Apodaca, NL</p>
              <p>Flota disponible: 27 unidades</p>
              <p>Personal activo: 12</p>
              <p>Horario: 07:00 - 22:00</p>
            </article>
            <article class="card branch-card">
              <h3>San Nicolas</h3>
              <p><strong>Gerente:</strong> Maria Fernanda Solis</p>
              <p><strong>Contacto:</strong> 81 2140 2288 | m.solis@cuidado-pug.com</p>
              <p><strong>Ubicacion:</strong> Av. Universidad 1300, San Nicolas de los Garza, NL</p>
              <p>Flota disponible: 31 unidades</p>
              <p>Personal activo: 14</p>
              <p>Horario: 08:00 - 21:00</p>
            </article>
          </div>
        </section>
      </section>

      <section class="admin-view" data-admin-view="prioridad">
        <section class="panel card">
          <div class="view-head">
            <h2>Lista de prioridad</h2>
            <p>Seguimiento operativo alineado a pagos, CRM, sucursales y ventas.</p>
          </div>
          <div class="priority-columns">
            <article class="card priority-card urgent">
              <h3>Alta prioridad</h3>
              <p class="priority-hint">Alertas de pago con mucho tiempo sin cobertura.</p>
              <ul id="priorityPaymentAlerts">
                <li>Cargando alertas de pago...</li>
              </ul>
            </article>
            <article class="card priority-card">
              <h3>Metodos de pago</h3>
              <ul>
                <li>Implementar meses sin intereses en flujo de pago.</li>
                <li>Monitorear aprobaciones por metodo y riesgo de contracargo.</li>
                <li>Revisar conversion por metodo de cobro en reservas.</li>
              </ul>
            </article>
            <article class="card priority-card">
              <h3>Operacion comercial</h3>
              <ul>
                <li>CRM para servicio al cliente con casos y SLA.</li>
                <li>Sucursales con gerente, contacto y ubicacion detallada.</li>
                <li>Ventas conectadas con cancelaciones y reembolsos.</li>
              </ul>
            </article>
          </div>
        </section>
      </section>

      <section class="admin-view" data-admin-view="organigrama">
        <section class="panel card">
          <div class="view-head">
            <h2>Organigrama</h2>
            <p>Estructura general del equipo administrativo y operativo.</p>
          </div>
          <div class="org-grid">
            <button class="card org-node org-role" type="button" data-org-role="direccion_general">
              <span class="org-role-title">Direccion General</span>
              <span class="org-role-count">1 responsable</span>
            </button>
            <button class="card org-node org-role" type="button" data-org-role="gerencia_operaciones">
              <span class="org-role-title">Gerencia de Operaciones</span>
              <span class="org-role-count">3 coordinadores</span>
            </button>
            <button class="card org-node org-role" type="button" data-org-role="gerencia_comercial">
              <span class="org-role-title">Gerencia Comercial</span>
              <span class="org-role-count">4 ejecutivos</span>
            </button>
            <button class="card org-node org-role" type="button" data-org-role="atencion_cliente">
              <span class="org-role-title">Atencion al Cliente</span>
              <span class="org-role-count">8 asesores</span>
            </button>
            <button class="card org-node org-role" type="button" data-org-role="logistica_flota">
              <span class="org-role-title">Logistica y Flota</span>
              <span class="org-role-count">10 operadores</span>
            </button>
          </div>

          <section id="orgEmployeePanel" class="card org-detail" aria-live="polite">
            <p id="orgDetailHint" class="org-detail-hint">
              Selecciona un rol del organigrama para ver todas las fichas del equipo.
            </p>

            <div id="orgDetailBody" class="org-detail-body" hidden>
              <section class="org-employee-picker" aria-label="Colaboradores del area">
                <p id="orgEmployeesMeta" class="org-employee-meta">-</p>
                <div id="orgEmployeesList" class="org-employees-list"></div>
              </section>

              <article class="org-passport-card" aria-label="Ficha de colaborador">
                <header class="org-passport-head">
                  <div class="org-passport-photo">
                    <span id="orgEmployeeInitials">-</span>
                  </div>
                  <div class="org-passport-head-main">
                    <p class="org-passport-label">Credencial interna</p>
                    <h3 id="orgEmployeeRole">-</h3>
                    <p id="orgEmployeeArea">-</p>
                    <div class="org-passport-badges">
                      <span id="orgEmployeeStatus" class="org-passport-badge">-</span>
                      <span id="orgEmployeeNationality" class="org-passport-badge">-</span>
                    </div>
                  </div>
                  <div class="org-passport-folio">
                    <p>Folio</p>
                    <strong id="orgEmployeeId">-</strong>
                    <small id="orgEmployeeIssueDate">-</small>
                  </div>
                </header>

                <div class="org-detail-grid">
                  <article class="org-detail-item">
                    <p>Empleado</p>
                    <strong id="orgEmployeeName">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Correo corporativo</p>
                    <strong id="orgEmployeeEmail">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Telefono</p>
                    <strong id="orgEmployeePhone">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Sucursal base</p>
                    <strong id="orgEmployeeBranch">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Turno</p>
                    <strong id="orgEmployeeShift">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Antiguedad</p>
                    <strong id="orgEmployeeSeniority">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Ingreso</p>
                    <strong id="orgEmployeeHireDate">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Nacimiento</p>
                    <strong id="orgEmployeeBirthDate">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Grupo sanguineo</p>
                    <strong id="orgEmployeeBloodType">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Contacto emergencia</p>
                    <strong id="orgEmployeeEmergencyContact">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Certificaciones</p>
                    <strong id="orgEmployeeCertifications">-</strong>
                  </article>
                  <article class="org-detail-item">
                    <p>Observaciones</p>
                    <strong id="orgEmployeeNotes">-</strong>
                  </article>
                </div>
              </article>
            </div>
          </section>
        </section>
      </section>

      <section class="admin-view" data-admin-view="proveedores">
        <section class="panel card">
          <div class="view-head">
            <h2>Proveedores</h2>
            <p>Control de contratos, servicio y cumplimiento de SLA.</p>
          </div>
          <div class="table-wrap mini-table">
            <table>
              <thead>
                <tr>
                  <th>Proveedor</th>
                  <th>Servicio</th>
                  <th>Contacto</th>
                  <th>Estatus</th>
                  <th>Vigencia</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Llantas del Norte</td>
                  <td>Mantenimiento preventivo</td>
                  <td>81 2211 4500</td>
                  <td>Activo</td>
                  <td>2026-12-31</td>
                </tr>
                <tr>
                  <td>Seguros Cima</td>
                  <td>Polizas de flota</td>
                  <td>81 9900 8800</td>
                  <td>Renovacion</td>
                  <td>2026-06-30</td>
                </tr>
                <tr>
                  <td>Telemetria MX</td>
                  <td>GPS y monitoreo</td>
                  <td>55 3344 1122</td>
                  <td>Activo</td>
                  <td>2027-01-15</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </section>
    </section>
  </main>

  <p id="msg" class="message" aria-live="polite"></p>

  <script src="/static/admin.js"></script>
</body>
</html>
